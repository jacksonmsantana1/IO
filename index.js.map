{"version":3,"sources":["src/index.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;;;;;AAEA,IAAM,UAAU,gBAAE,OAAlB;AACA,IAAM,YAAW,gBAAE,QAAnB;;IAEM,E;AAEJ,cAAY,EAAZ,EAAgB;AAAA;;AACd,QAAI,EAAE,gBAAgB,EAAlB,CAAJ,EAA2B;AACzB,aAAO,IAAI,EAAJ,CAAO,EAAP,CAAP;AACD;;AAED,SAAK,MAAL,GAAc,EAAd;AACA,WAAO,IAAP;AACD;;;;wBAeG,E,EAAI;AACN;AACA,UAAM,QAAQ,IAAd;AACA,aAAO,IAAI,EAAJ,CAAO,QAAQ,EAAR,EAAY,MAAM,MAAlB,CAAP,CAAP;AACD;;;0BAEK,E,EAAI;AACR;AACA,UAAM,QAAQ,IAAd;AACA,aAAO,IAAI,EAAJ,CAAO,YAAY;AACxB;AACA,YAAM,OAAO,GAAG,MAAM,MAAN,CAAa,KAAb,CAAmB,KAAnB,EAA0B,SAA1B,CAAH,CAAb;AACA,eAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,EAAwB,SAAxB,CAAP;AACD,OAJM,CAAP;AAKD;;;uBAEE,M,EAAQ;AACT;AACA,UAAM,QAAQ,IAAd;AACA,aAAO,MAAM,KAAN,CAAY,UAAC,EAAD;AAAA,eAAS,OAAO,GAAP,CAAW,EAAX,CAAT;AAAA,OAAZ,CAAP;AACD;;;4BAEO;AACN;AACA,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,EAAwB,SAAxB,CAAP;AACD;;;2BAEM;AACL;AACA,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,EAAwB,SAAxB,CAAP;AACD;;;+BAEU;AACT,qBAAa,UAAS,KAAK,MAAL,EAAT,CAAb;AACD;;;uBA/CS,E,EAAI;AACZ,aAAO,IAAI,EAAJ,CAAO;AAAA,eAAO,EAAP;AAAA,OAAP,CAAP;AACD;;;0BAEY,E,EAAI;AACf;AACA,aAAO,GAAG,KAAH,CAAS,KAAT,CAAe,EAAf,EAAmB,GAAG,KAAH,CAAS,IAAT,CAAc,SAAd,EAAyB,CAAzB,CAAnB,CAAP;AACD;;;yBAEW,E,EAAI;AACd,aAAO,GAAG,MAAH,EAAP;AACD;;;;;;kBAyCK,E","file":"index.js","sourcesContent":["import R from 'ramda';\n\nconst compose = R.compose;\nconst toString = R.toString;\n\nclass IO {\n\n  constructor(fn) {\n    if (!(this instanceof IO)) {\n      return new IO(fn);\n    }\n\n    this.effect = fn;\n    return this;\n  }\n\n  static of(fn) {\n    return new IO(() => (fn));\n  }\n\n  static runIO(io) {\n    /*eslint prefer-spread:0 prefer-rest-params:0*/\n    return io.runIO.apply(io, [].slice.call(arguments, 1));\n  }\n\n  static join(io) {\n    return io.effect();\n  }\n\n  map(fn) {\n    /*eslint no-underscore-dangle:0*/\n    const _this = this;\n    return new IO(compose(fn, _this.effect));\n  }\n\n  chain(fn) {\n    /*eslint no-underscore-dangle:0*/\n    const _this = this;\n    return new IO(function () {\n      /*eslint prefer-spread:0 prefer-rest-params:0*/\n      const next = fn(_this.effect.apply(_this, arguments));\n      return next.effect.apply(next, arguments);\n    });\n  }\n\n  ap(thatIO) {\n    /*eslint no-underscore-dangle:0*/\n    const _this = this;\n    return _this.chain((fn) => (thatIO.map(fn)));\n  }\n\n  runIO() {\n    /*eslint prefer-spread:0 prefer-rest-params:0*/\n    return this.effect.apply(this, arguments);\n  }\n\n  join() {\n    /*eslint prefer-spread:0 prefer-rest-params:0*/\n    return this.effect.apply(this, arguments);\n  }\n\n  toString() {\n    return `IO(${toString(this.effect())})`;\n  }\n\n}\n\nexport\ndefault IO;\n"]}